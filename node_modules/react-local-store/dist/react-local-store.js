var e=require("react"),t=e.createContext,r=e.useContext,n=e.useEffect,o=e.useState,i="__REACT_LOCAL_STORE__",a=function(e){return Object.assign({},e)},u=window.requestIdleCallback||function(e){var t=Date.now();setTimeout(function(){return e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},c={};function l(r){var l=r.children,f=r.name;void 0===f&&(f=i);var s=r.sync;void 0===s&&(s=!0);var v=r.initialState;void 0===v&&(v={});var d=r.reducer;void 0===d&&(d=a);var S=o(function(){var e=localStorage.getItem(f)||JSON.stringify(v);return localStorage.setItem(f,e),e}),m=S[0],g=S[1],O=JSON.parse(m);return c[f]||(c[f]=t(void 0)),n(function(){if(s){var e=!1;return u(function t(){var r=localStorage.getItem(f);m!==r&&g(r||JSON.stringify(v)),e||u(t)}),function(){e=!0}}},[O]),e.createElement(c[f].Provider,{value:[O,function(e){var t=d(O,e),r=JSON.stringify(t);localStorage.setItem(f,r),g(r)}]},e.Children.only(l))}function f(e){return r(c[e||i])}exports.LocalStoreProvider=l,exports.useLocalStore=f,exports.createLocalStore=function(t){return void 0===t&&(t={}),[function(r){return e.createElement(l,Object.assign({},r,t))},function(){return f(t.name)}]};
